{"ast":null,"code":"import axios from 'axios';\nimport { createAsyncThunk } from '@reduxjs/toolkit';\nconst backendURL = 'https://ptebackend.aigma.com.au/admin/'; // const backendURL = 'http://127.0.0.1:5000'\n\nexport const userLogin = createAsyncThunk('user/login', async (_ref, _ref2) => {\n  let {\n    email,\n    password\n  } = _ref;\n  let {\n    rejectWithValue\n  } = _ref2;\n\n  try {\n    console.log(\"something\");\n    alert(\"user login\"); // configure header's Content-Type as JSON\n    // const config = {\n    //   headers: {\n    //     'Content-Type': 'application/json',\n    //   },\n    // }\n\n    const config = {\n      headers: {\n        Authorization: 'Bearer ' + this.token\n      }\n    };\n    console.log(config);\n    const {\n      data\n    } = await axios.post(`${backendURL}login`, {\n      email,\n      password\n    }, config);\n    console.log(data); // store user's token in local storage\n\n    localStorage.setItem('userToken', data.token);\n    return data;\n  } catch (error) {\n    alert(\"error\"); // return custom error message from API if any\n\n    if (error.response && error.response.data.message) {\n      return rejectWithValue(error.response.data.message);\n    } else {\n      return rejectWithValue(error.message);\n    }\n  }\n});\nexport const registerUser = createAsyncThunk('user/register', async (_ref3, _ref4) => {\n  let {\n    firstName,\n    email,\n    password\n  } = _ref3;\n  let {\n    rejectWithValue\n  } = _ref4;\n\n  try {\n    const config = {\n      headers: {\n        'Content-Type': 'application/json'\n      }\n    };\n    await axios.post(`${backendURL}/api/user/register`, {\n      firstName,\n      email,\n      password\n    }, config);\n  } catch (error) {\n    if (error.response && error.response.data.message) {\n      return rejectWithValue(error.response.data.message);\n    } else {\n      return rejectWithValue(error.message);\n    }\n  }\n});","map":{"version":3,"names":["axios","createAsyncThunk","backendURL","userLogin","email","password","rejectWithValue","console","log","alert","config","headers","Authorization","token","data","post","localStorage","setItem","error","response","message","registerUser","firstName"],"sources":["C:/Users/SiThu/Documents/sithu/react/redux-user-auth/frontend/src/features/auth/authActions.js"],"sourcesContent":["import axios from 'axios'\r\nimport { createAsyncThunk } from '@reduxjs/toolkit'\r\n\r\nconst backendURL = 'https://ptebackend.aigma.com.au/admin/'\r\n// const backendURL = 'http://127.0.0.1:5000'\r\n\r\nexport const userLogin = createAsyncThunk(\r\n  'user/login',\r\n  async ({ email, password }, { rejectWithValue }) => {\r\n    try {\r\n      console.log(\"something\");\r\n      alert(\"user login\")\r\n      // configure header's Content-Type as JSON\r\n      // const config = {\r\n      //   headers: {\r\n      //     'Content-Type': 'application/json',\r\n      //   },\r\n      // }\r\n\r\n\r\n     const config = {\r\n        headers: {\r\n            Authorization: 'Bearer ' + this.token\r\n        }\r\n    }\r\n    console.log(config);\r\n\r\n      const { data } = await axios.post(\r\n        `${backendURL}login`,\r\n        { email, password },\r\n        config\r\n      )\r\n      console.log(data);\r\n\r\n      // store user's token in local storage\r\n      localStorage.setItem('userToken', data.token)\r\n\r\n      return data\r\n    } catch (error) {\r\n      alert(\"error\")\r\n      // return custom error message from API if any\r\n      if (error.response && error.response.data.message) {\r\n        return rejectWithValue(error.response.data.message)\r\n      } else {\r\n        return rejectWithValue(error.message)\r\n      }\r\n    }\r\n  }\r\n)\r\n\r\nexport const registerUser = createAsyncThunk(\r\n  'user/register',\r\n  async ({ firstName, email, password }, { rejectWithValue }) => {\r\n    try {\r\n      const config = {\r\n        headers: {\r\n          'Content-Type': 'application/json',\r\n        },\r\n      }\r\n\r\n      await axios.post(\r\n        `${backendURL}/api/user/register`,\r\n        { firstName, email, password },\r\n        config\r\n      )\r\n    } catch (error) {\r\n      if (error.response && error.response.data.message) {\r\n        return rejectWithValue(error.response.data.message)\r\n      } else {\r\n        return rejectWithValue(error.message)\r\n      }\r\n    }\r\n  }\r\n)\r\n"],"mappings":"AAAA,OAAOA,KAAP,MAAkB,OAAlB;AACA,SAASC,gBAAT,QAAiC,kBAAjC;AAEA,MAAMC,UAAU,GAAG,wCAAnB,C,CACA;;AAEA,OAAO,MAAMC,SAAS,GAAGF,gBAAgB,CACvC,YADuC,EAEvC,uBAAoD;EAAA,IAA7C;IAAEG,KAAF;IAASC;EAAT,CAA6C;EAAA,IAAxB;IAAEC;EAAF,CAAwB;;EAClD,IAAI;IACFC,OAAO,CAACC,GAAR,CAAY,WAAZ;IACAC,KAAK,CAAC,YAAD,CAAL,CAFE,CAGF;IACA;IACA;IACA;IACA;IACA;;IAGD,MAAMC,MAAM,GAAG;MACZC,OAAO,EAAE;QACLC,aAAa,EAAE,YAAY,KAAKC;MAD3B;IADG,CAAf;IAKDN,OAAO,CAACC,GAAR,CAAYE,MAAZ;IAEE,MAAM;MAAEI;IAAF,IAAW,MAAMd,KAAK,CAACe,IAAN,CACpB,GAAEb,UAAW,OADO,EAErB;MAAEE,KAAF;MAASC;IAAT,CAFqB,EAGrBK,MAHqB,CAAvB;IAKAH,OAAO,CAACC,GAAR,CAAYM,IAAZ,EAvBE,CAyBF;;IACAE,YAAY,CAACC,OAAb,CAAqB,WAArB,EAAkCH,IAAI,CAACD,KAAvC;IAEA,OAAOC,IAAP;EACD,CA7BD,CA6BE,OAAOI,KAAP,EAAc;IACdT,KAAK,CAAC,OAAD,CAAL,CADc,CAEd;;IACA,IAAIS,KAAK,CAACC,QAAN,IAAkBD,KAAK,CAACC,QAAN,CAAeL,IAAf,CAAoBM,OAA1C,EAAmD;MACjD,OAAOd,eAAe,CAACY,KAAK,CAACC,QAAN,CAAeL,IAAf,CAAoBM,OAArB,CAAtB;IACD,CAFD,MAEO;MACL,OAAOd,eAAe,CAACY,KAAK,CAACE,OAAP,CAAtB;IACD;EACF;AACF,CAzCsC,CAAlC;AA4CP,OAAO,MAAMC,YAAY,GAAGpB,gBAAgB,CAC1C,eAD0C,EAE1C,wBAA+D;EAAA,IAAxD;IAAEqB,SAAF;IAAalB,KAAb;IAAoBC;EAApB,CAAwD;EAAA,IAAxB;IAAEC;EAAF,CAAwB;;EAC7D,IAAI;IACF,MAAMI,MAAM,GAAG;MACbC,OAAO,EAAE;QACP,gBAAgB;MADT;IADI,CAAf;IAMA,MAAMX,KAAK,CAACe,IAAN,CACH,GAAEb,UAAW,oBADV,EAEJ;MAAEoB,SAAF;MAAalB,KAAb;MAAoBC;IAApB,CAFI,EAGJK,MAHI,CAAN;EAKD,CAZD,CAYE,OAAOQ,KAAP,EAAc;IACd,IAAIA,KAAK,CAACC,QAAN,IAAkBD,KAAK,CAACC,QAAN,CAAeL,IAAf,CAAoBM,OAA1C,EAAmD;MACjD,OAAOd,eAAe,CAACY,KAAK,CAACC,QAAN,CAAeL,IAAf,CAAoBM,OAArB,CAAtB;IACD,CAFD,MAEO;MACL,OAAOd,eAAe,CAACY,KAAK,CAACE,OAAP,CAAtB;IACD;EACF;AACF,CAtByC,CAArC"},"metadata":{},"sourceType":"module"}